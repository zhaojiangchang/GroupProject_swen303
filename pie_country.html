<html>
<head>
<meta charset="utf-8">
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript" src="http://d3js.org/d3.v3.min.js"
	charset="utf-8"></script>
<script src="teams.js"></script>
<script type="text/javascript">
    </script>
<style type="text/css">
select {
	font-size: 15px;
	font-family: ubuntu;
	border: 0;
	-webkit-appearance: none;
	-moz-appearance: none;
	background: #0088cc url(Images/arrow.png) no-repeat 90% center;
	width: 100px;
	text-indent: 0.01px;
	text-overflow: "";
	color: #FFF;
	border-radius: 15px;
	padding: 5px;
	box-shadow: inset 0 0 5px rgba(000, 000, 000, 0.5)
}

.pie {
	display: inline-block;
}
</style>
</head>
<body>
	<div>
		<select>
			<option id="country" value=1>New Zealand</option>
			<option id="country" value=2>Australia</option>
		</select> <select>
			<option id="year" value=2008>2008</option>
			<option id="year" value=2009>2009</option>
			<option id="year" value=2010>2010</option>
			<option id="year" value=2011>2011</option>
			<option id="year" value=2012>2012</option>
			<option id="year" value=2013>2013</option>
		</select>
	</div>
	<div>
		<br>
	</div>
	<script>
		var choose_country = "New Zealand"
		var choose_year = "2008"
		draw_pie()
		d3.selectAll("#year")
			.on("click", function() {
						var choice = d3.select(this).attr("value")
						switch(choice){
							case "2008":
								choose_year = 2008
								draw_pie()
								break;
							case "2009":
								choose_year = 2009
								draw_pie()
								break;
							case "2010":
								choose_year = 2010
								draw_pie()
								break;
							case "2011":
								choose_year = 2011
								draw_pie()
								break;
							case "2012":
								choose_year = 2012
								draw_pie()
								break;
							case "2013":
								choose_year = 2013
								draw_pie()
						}
					})

		d3.selectAll("#team")
			.on("click", function() {
						var choice = d3.select(this).attr("value")
					switch(choice){
							case "1":
								choose_country = "New Zealand"
								draw_pie("New Zealand")
								break;
							case "2":
								choose_country = "Australia"
								draw_pie("Australia")
								break;
						}
					})
	try{
	google.load("visualization", "1", {packages:["corechart"]});
      google.setOnLoadCallback(draw_pie);
	}
	catch(err){
	}
  	function draw_pie(){
		d3.csv(choose_year+ "_new_Table1.csv", function(data) {
		init_team_list()
		init_basic_info(data)
		console.log(team_list)
		var win_count = 0;
		var index = 0;
		for(;index<team_list.length; index++){

		}



	for(var i = 0; i < team_list.length; i++){
		if(team_list[i].name == choose_team){
			break
		}
	}

	try{
        var data = google.visualization.arrayToDataTable([
          ['Win_or_Lost', "Total winning"],
          ['Win',     parseInt(team_list[i].win_rate * 100)],
          ['Lost',    parseInt((1 - team_list[i].win_rate) * 100)],
        ]);
        var data_2 = google.visualization.arrayToDataTable([
          ['Win_or_Lost', team_list[i].name + " Home winning"],
          ['Win',    parseInt(team_list[i].home.win_percentage * 100)],
          ['Lost',   parseInt((1 - team_list[i].home.win_percentage) * 100)],
        ]);
		var data_3 = google.visualization.arrayToDataTable([
          ['Win_or_Lost', team_list[i].name + " Away winning"],
          ['Win',    parseInt(team_list[i].away.win_percentage * 100)],
          ['Lost',   parseInt((1 - team_list[i].away.win_percentage) * 100)],
        ]);
	}
	catch(err){
	}
        var options = {
          title: "Total Percentage",
			slices: {
				0: {color: '#FF3399'},
				1: {color: '#0099FF'}
			},
			pieStartAngle: 100,
			animation:{ duration: 500,
						easing: 'out',
			}
        };

		var options_2 = {
          title: "Home Percentage",
			slices: {
				0: {color: '#FF3399'},
				1: {color: '#0099FF'}
			},
			pieStartAngle: 100,
			animation:{ duration: 500,
						easing: 'out',
			}
        };
		var options_3 = {
		title: "Away Percentage",
		  slices: {
			  0: {color: '#FF3399'},
			  1: {color: '#0099FF'}
		  },
			pieStartAngle: 100,
			animation:{ duration: 500,
						easing: 'out',
			}
		};
		try{
        var chart = new google.visualization.PieChart(document.getElementById('piechart'));
        chart.draw(data, options);
        var chart = new google.visualization.PieChart(document.getElementById('piechart_2'));
		chart.draw(data_2, options_2)
        var chart = new google.visualization.PieChart(document.getElementById('piechart_3'));
		chart.draw(data_3, options_3)
		}
		catch(err){
		}
      })
	}
	</script>
	<div class="pie" id="piechart" style="width: 300px; height: 250px;"></div>
	<div class="pie" id="piechart_2" style="width: 300px; height: 250px;"></div>
	<div class="pie" id="piechart_3" style="width: 300px; height: 250px;"></div>

</body>
</html>
